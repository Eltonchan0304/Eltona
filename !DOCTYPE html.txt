<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <title>电话格式转换器</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 700px; margin: auto; }
        textarea { width: 100%; height: 150px; margin-bottom: 10px; font-size: 16px; }
        button { padding: 10px 20px; margin-right: 10px; font-size: 15px; cursor: pointer; }
        #output { white-space: pre-wrap; background: #f0f0f0; padding: 10px; min-height: 100px; font-size: 16px; }
    </style>
</head>
<body>
    <h2>📱 电话号码格式转换器</h2>
    <p>粘贴你的号码（每行一个，支持含名字和各种符号）：</p>
    <textarea id="input" placeholder="例如：&#10;jacqueline （老闆）  +852 9831 1166"></textarea>
    <br>
    <button onclick="formatNumbers()">转换格式</button>
    <button onclick="downloadTxt()">下载为 TXT</button>

    <h3>输出结果：</h3>
    <div id="output"></div>

    <script>
        function formatNumbers() {
            const raw = document.getElementById("input").value;
            const lines = raw.split(/\r?\n/);

            const cleaned = lines.map(line => {
                let match = line.match(/(\+?[\d\s]{8,})/g);
                if (!match) return "";

                let candidate = match.find(s => s.replace(/\D/g, '').startsWith('852'));
                if (!candidate) candidate = match[0];

                let digits = candidate.replace(/\D/g, '');

                if (!digits.startsWith('852')) {
                    digits = '852' + digits;
                }

                digits = digits.slice(0, 11);

                return digits;
            }).filter(Boolean);

            // ✅ 去重
            const unique = [...new Set(cleaned)];

            document.getElementById("output").textContent = unique.join("\n");
        }

        function downloadTxt() {
            const text = document.getElementById("output").textContent;
            const blob = new Blob([text], { type: "text/plain" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "formatted_numbers.txt";
            link.click();
        }
    </script>
</body>
</html>